<!DOCTYPE html>
<html>
<head>
  <title>Table Locator</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f4f4f4;
      text-align: center;
      padding: 20px;
    }

    .room {
      width: 360px;
      height: 360px;
      background: #fff;
      margin: 20px auto;
      position: relative;
      border: 2px solid #aaa;
    }

    .table {
      width: 60px;
      height: 60px;
      background: #4CAF50;
      color: white;
      font-weight: bold;
      border-radius: 50%;
      line-height: 60px;
      text-align: center;
      position: absolute;
      cursor: pointer;
    }

    #output {
      margin-top: 20px;
      font-size: 1.2em;
      color: #333;
    }
  </style>
</head>
<body>
  <h2>Welcome to the Smart Table Locator</h2>
  <p id="gps-status">Detecting your location...</p>

  <div id="room" class="room" style="display: none;">
    <div class="table" style="top: 20px; left: 20px;" onclick="selectTable(1)">1</div>
    <div class="table" style="top: 20px; left: 140px;" onclick="selectTable(2)">2</div>
    <div class="table" style="top: 20px; left: 260px;" onclick="selectTable(3)">3</div>

    <div class="table" style="top: 140px; left: 20px;" onclick="selectTable(4)">4</div>
    <div class="table" style="top: 140px; left: 140px;" onclick="selectTable(5)">5</div>
    <div class="table" style="top: 140px; left: 260px;" onclick="selectTable(6)">6</div>

    <div class="table" style="top: 260px; left: 20px;" onclick="selectTable(7)">7</div>
    <div class="table" style="top: 260px; left: 140px;" onclick="selectTable(8)">8</div>
    <div class="table" style="top: 260px; left: 260px;" onclick="selectTable(9)">9</div>
  </div>

  <p id="output"></p>

  <script>
    function selectTable(num) {
      document.getElementById("output").innerText = "‚úÖ You selected Table " + num;
    }

    function checkLocation() {
      if (!navigator.geolocation) {
        document.getElementById('gps-status').innerText = '‚ùå Geolocation not supported.';
        return;
      }

      navigator.geolocation.getCurrentPosition(success, error);
    }

    function success(position) {
      const lat = position.coords.latitude;
      const long = position.coords.longitude;

      // Your room coordinates - replace with your actual room's location
      const roomLat = 12.9715987;
      const roomLong = 77.5945627;

      const distance = getDistanceFromLatLonInMeters(lat, long, roomLat, roomLong);

      if (distance < 20) {
        document.getElementById('gps-status').innerText = "üìç You're in the room!";
        document.getElementById('room').style.display = 'block';
      } else {
        document.getElementById('gps-status').innerText = "‚ö†Ô∏è You're not in the room area. Move closer.";
      }
    }

    function error() {
      document.getElementById('gps-status').innerText = '‚ùå Unable to retrieve location.';
    }

    // Haversine formula to calculate distance between coordinates
    function getDistanceFromLatLonInMeters(lat1, lon1, lat2, lon2) {
      const R = 6371e3; // meters
      const œÜ1 = lat1 * Math.PI / 180;
      const œÜ2 = lat2 * Math.PI / 180;
      const ŒîœÜ = (lat2 - lat1) * Math.PI / 180;
      const ŒîŒª = (lon2 - lon1) * Math.PI / 180;

      const a = Math.sin(ŒîœÜ / 2) * Math.sin(ŒîœÜ / 2) +
                Math.cos(œÜ1) * Math.cos(œÜ2) *
                Math.sin(ŒîŒª / 2) * Math.sin(ŒîŒª / 2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));

      return R * c;
    }

    // Run on load
    checkLocation();
  </script>
</body>
</html>
